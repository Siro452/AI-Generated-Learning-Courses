generator client {
  provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL")
    directUrl = env("DIRECT_URL")
}

model User {
  id        String    @id @default(cuid())
  createdAt DateTime  @default(now())
  username  String    
  sessions  Session[]
}

model Event {
    id               String   @id @default(cuid())
    createdAt        DateTime @default(now())
    eventType        String   @db.VarChar(32)
    eventDescription String   @db.VarChar(250)
    eventStatus      String   @db.VarChar(250)
    session          Session  @relation(fields: [sessionid], references: [id], onDelete: Cascade)
    sessionid        String
    // uploadedDocument UploadedDocument?
}

model Session {
    id          String   @id @default(cuid())
    createdAt   DateTime @default(now())
    sessionDate DateTime
    user        User     @relation(fields: [userid], references: [id], onDelete: Cascade)
    userid      String
    event       Event[]
    // uploadeddocument UploadedDocument[]
}

model UploadedDocument {
    id            String   @id @default(cuid())
    createdAt     DateTime @default(now())
    fileName      String
    fileContent   String
    processedData String?
    // session       Session  @relation(fields: [sessionid], references: [id], onDelete: Cascade)
    // sessionid     String   @unique
    // event         Event    @relation(fields: [eventid], references: [id], onDelete: Cascade)
    // eventid       String   @unique
}
